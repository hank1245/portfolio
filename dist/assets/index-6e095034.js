import{d as et}from"./dispatch-4199cc96.js";function $t(t,n){var e,f=1;t==null&&(t=0),n==null&&(n=0);function a(){var o,s=e.length,r,c=0,i=0;for(o=0;o<s;++o)r=e[o],c+=r.x,i+=r.y;for(c=(c/s-t)*f,i=(i/s-n)*f,o=0;o<s;++o)r=e[o],r.x-=c,r.y-=i}return a.initialize=function(o){e=o},a.x=function(o){return arguments.length?(t=+o,a):t},a.y=function(o){return arguments.length?(n=+o,a):n},a.strength=function(o){return arguments.length?(f=+o,a):f},a}function it(t){const n=+this._x.call(null,t),e=+this._y.call(null,t);return W(this.cover(n,e),n,e,t)}function W(t,n,e,f){if(isNaN(n)||isNaN(e))return t;var a,o=t._root,s={data:f},r=t._x0,c=t._y0,i=t._x1,v=t._y1,w,y,h,_,l,u,g,x;if(!o)return t._root=s,t;for(;o.length;)if((l=n>=(w=(r+i)/2))?r=w:i=w,(u=e>=(y=(c+v)/2))?c=y:v=y,a=o,!(o=o[g=u<<1|l]))return a[g]=s,t;if(h=+t._x.call(null,o.data),_=+t._y.call(null,o.data),n===h&&e===_)return s.next=o,a?a[g]=s:t._root=s,t;do a=a?a[g]=new Array(4):t._root=new Array(4),(l=n>=(w=(r+i)/2))?r=w:i=w,(u=e>=(y=(c+v)/2))?c=y:v=y;while((g=u<<1|l)===(x=(_>=y)<<1|h>=w));return a[x]=o,a[g]=s,t}function rt(t){var n,e,f=t.length,a,o,s=new Array(f),r=new Array(f),c=1/0,i=1/0,v=-1/0,w=-1/0;for(e=0;e<f;++e)isNaN(a=+this._x.call(null,n=t[e]))||isNaN(o=+this._y.call(null,n))||(s[e]=a,r[e]=o,a<c&&(c=a),a>v&&(v=a),o<i&&(i=o),o>w&&(w=o));if(c>v||i>w)return this;for(this.cover(c,i).cover(v,w),e=0;e<f;++e)W(this,s[e],r[e],t[e]);return this}function ft(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,f=this._y0,a=this._x1,o=this._y1;if(isNaN(e))a=(e=Math.floor(t))+1,o=(f=Math.floor(n))+1;else{for(var s=a-e||1,r=this._root,c,i;e>t||t>=a||f>n||n>=o;)switch(i=(n<f)<<1|t<e,c=new Array(4),c[i]=r,r=c,s*=2,i){case 0:a=e+s,o=f+s;break;case 1:e=a-s,o=f+s;break;case 2:a=e+s,f=o-s;break;case 3:e=a-s,f=o-s;break}this._root&&this._root.length&&(this._root=r)}return this._x0=e,this._y0=f,this._x1=a,this._y1=o,this}function ot(){var t=[];return this.visit(function(n){if(!n.length)do t.push(n.data);while(n=n.next)}),t}function at(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function I(t,n,e,f,a){this.node=t,this.x0=n,this.y0=e,this.x1=f,this.y1=a}function ut(t,n,e){var f,a=this._x0,o=this._y0,s,r,c,i,v=this._x1,w=this._y1,y=[],h=this._root,_,l;for(h&&y.push(new I(h,a,o,v,w)),e==null?e=1/0:(a=t-e,o=n-e,v=t+e,w=n+e,e*=e);_=y.pop();)if(!(!(h=_.node)||(s=_.x0)>v||(r=_.y0)>w||(c=_.x1)<a||(i=_.y1)<o))if(h.length){var u=(s+c)/2,g=(r+i)/2;y.push(new I(h[3],u,g,c,i),new I(h[2],s,g,u,i),new I(h[1],u,r,c,g),new I(h[0],s,r,u,g)),(l=(n>=g)<<1|t>=u)&&(_=y[y.length-1],y[y.length-1]=y[y.length-1-l],y[y.length-1-l]=_)}else{var x=t-+this._x.call(null,h.data),m=n-+this._y.call(null,h.data),p=x*x+m*m;if(p<e){var N=Math.sqrt(e=p);a=t-N,o=n-N,v=t+N,w=n+N,f=h.data}}return f}function st(t){if(isNaN(v=+this._x.call(null,t))||isNaN(w=+this._y.call(null,t)))return this;var n,e=this._root,f,a,o,s=this._x0,r=this._y0,c=this._x1,i=this._y1,v,w,y,h,_,l,u,g;if(!e)return this;if(e.length)for(;;){if((_=v>=(y=(s+c)/2))?s=y:c=y,(l=w>=(h=(r+i)/2))?r=h:i=h,n=e,!(e=e[u=l<<1|_]))return this;if(!e.length)break;(n[u+1&3]||n[u+2&3]||n[u+3&3])&&(f=n,g=u)}for(;e.data!==t;)if(a=e,!(e=e.next))return this;return(o=e.next)&&delete e.next,a?(o?a.next=o:delete a.next,this):n?(o?n[u]=o:delete n[u],(e=n[0]||n[1]||n[2]||n[3])&&e===(n[3]||n[2]||n[1]||n[0])&&!e.length&&(f?f[g]=e:this._root=e),this):(this._root=o,this)}function lt(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this}function ht(){return this._root}function ct(){var t=0;return this.visit(function(n){if(!n.length)do++t;while(n=n.next)}),t}function gt(t){var n=[],e,f=this._root,a,o,s,r,c;for(f&&n.push(new I(f,this._x0,this._y0,this._x1,this._y1));e=n.pop();)if(!t(f=e.node,o=e.x0,s=e.y0,r=e.x1,c=e.y1)&&f.length){var i=(o+r)/2,v=(s+c)/2;(a=f[3])&&n.push(new I(a,i,v,r,c)),(a=f[2])&&n.push(new I(a,o,v,i,c)),(a=f[1])&&n.push(new I(a,i,s,r,v)),(a=f[0])&&n.push(new I(a,o,s,i,v))}return this}function vt(t){var n=[],e=[],f;for(this._root&&n.push(new I(this._root,this._x0,this._y0,this._x1,this._y1));f=n.pop();){var a=f.node;if(a.length){var o,s=f.x0,r=f.y0,c=f.x1,i=f.y1,v=(s+c)/2,w=(r+i)/2;(o=a[0])&&n.push(new I(o,s,r,v,w)),(o=a[1])&&n.push(new I(o,v,r,c,w)),(o=a[2])&&n.push(new I(o,s,w,v,i)),(o=a[3])&&n.push(new I(o,v,w,c,i))}e.push(f)}for(;f=e.pop();)t(f.node,f.x0,f.y0,f.x1,f.y1);return this}function yt(t){return t[0]}function xt(t){return arguments.length?(this._x=t,this):this._x}function pt(t){return t[1]}function _t(t){return arguments.length?(this._y=t,this):this._y}function G(t,n,e){var f=new J(n??yt,e??pt,NaN,NaN,NaN,NaN);return t==null?f:f.addAll(t)}function J(t,n,e,f,a,o){this._x=t,this._y=n,this._x0=e,this._y0=f,this._x1=a,this._y1=o,this._root=void 0}function K(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var b=G.prototype=J.prototype;b.copy=function(){var t=new J(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,e,f;if(!n)return t;if(!n.length)return t._root=K(n),t;for(e=[{source:n,target:t._root=new Array(4)}];n=e.pop();)for(var a=0;a<4;++a)(f=n.source[a])&&(f.length?e.push({source:f,target:n.target[a]=new Array(4)}):n.target[a]=K(f));return t};b.add=it;b.addAll=rt;b.cover=ft;b.data=ot;b.extent=at;b.find=ut;b.remove=st;b.removeAll=lt;b.root=ht;b.size=ct;b.visit=gt;b.visitAfter=vt;b.x=xt;b.y=_t;function d(t){return function(){return t}}function S(t){return(t()-.5)*1e-6}function wt(t){return t.x+t.vx}function mt(t){return t.y+t.vy}function Bt(t){var n,e,f,a=1,o=1;typeof t!="function"&&(t=d(t==null?1:+t));function s(){for(var i,v=n.length,w,y,h,_,l,u,g=0;g<o;++g)for(w=G(n,wt,mt).visitAfter(r),i=0;i<v;++i)y=n[i],l=e[y.index],u=l*l,h=y.x+y.vx,_=y.y+y.vy,w.visit(x);function x(m,p,N,z,j){var A=m.data,T=m.r,M=l+T;if(A){if(A.index>y.index){var E=h-A.x-A.vx,F=_-A.y-A.vy,D=E*E+F*F;D<M*M&&(E===0&&(E=S(f),D+=E*E),F===0&&(F=S(f),D+=F*F),D=(M-(D=Math.sqrt(D)))/D*a,y.vx+=(E*=D)*(M=(T*=T)/(u+T)),y.vy+=(F*=D)*M,A.vx-=E*(M=1-M),A.vy-=F*M)}return}return p>h+M||z<h-M||N>_+M||j<_-M}}function r(i){if(i.data)return i.r=e[i.data.index];for(var v=i.r=0;v<4;++v)i[v]&&i[v].r>i.r&&(i.r=i[v].r)}function c(){if(n){var i,v=n.length,w;for(e=new Array(v),i=0;i<v;++i)w=n[i],e[w.index]=+t(w,i,n)}}return s.initialize=function(i,v){n=i,f=v,c()},s.iterations=function(i){return arguments.length?(o=+i,s):o},s.strength=function(i){return arguments.length?(a=+i,s):a},s.radius=function(i){return arguments.length?(t=typeof i=="function"?i:d(+i),c(),s):t},s}function Nt(t){return t.index}function O(t,n){var e=t.get(n);if(!e)throw new Error("node not found: "+n);return e}function kt(t){var n=Nt,e=w,f,a=d(30),o,s,r,c,i,v=1;t==null&&(t=[]);function w(u){return 1/Math.min(r[u.source.index],r[u.target.index])}function y(u){for(var g=0,x=t.length;g<v;++g)for(var m=0,p,N,z,j,A,T,M;m<x;++m)p=t[m],N=p.source,z=p.target,j=z.x+z.vx-N.x-N.vx||S(i),A=z.y+z.vy-N.y-N.vy||S(i),T=Math.sqrt(j*j+A*A),T=(T-o[m])/T*u*f[m],j*=T,A*=T,z.vx-=j*(M=c[m]),z.vy-=A*M,N.vx+=j*(M=1-M),N.vy+=A*M}function h(){if(s){var u,g=s.length,x=t.length,m=new Map(s.map((N,z)=>[n(N,z,s),N])),p;for(u=0,r=new Array(g);u<x;++u)p=t[u],p.index=u,typeof p.source!="object"&&(p.source=O(m,p.source)),typeof p.target!="object"&&(p.target=O(m,p.target)),r[p.source.index]=(r[p.source.index]||0)+1,r[p.target.index]=(r[p.target.index]||0)+1;for(u=0,c=new Array(x);u<x;++u)p=t[u],c[u]=r[p.source.index]/(r[p.source.index]+r[p.target.index]);f=new Array(x),_(),o=new Array(x),l()}}function _(){if(s)for(var u=0,g=t.length;u<g;++u)f[u]=+e(t[u],u,t)}function l(){if(s)for(var u=0,g=t.length;u<g;++u)o[u]=+a(t[u],u,t)}return y.initialize=function(u,g){s=u,i=g,h()},y.links=function(u){return arguments.length?(t=u,h(),y):t},y.id=function(u){return arguments.length?(n=u,y):n},y.iterations=function(u){return arguments.length?(v=+u,y):v},y.strength=function(u){return arguments.length?(e=typeof u=="function"?u:d(+u),_(),y):e},y.distance=function(u){return arguments.length?(a=typeof u=="function"?u:d(+u),l(),y):a},y}var B=0,C=0,k=0,Z=1e3,Q,L,R=0,$=0,X=0,P=typeof performance=="object"&&performance.now?performance:Date,q=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function tt(){return $||(q(dt),$=P.now()+X)}function dt(){$=0}function Y(){this._call=this._time=this._next=null}Y.prototype=nt.prototype={constructor:Y,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?tt():+e)+(n==null?0:+n),!this._next&&L!==this&&(L?L._next=this:Q=this,L=this),this._call=t,this._time=e,H()},stop:function(){this._call&&(this._call=null,this._time=1/0,H())}};function nt(t,n,e){var f=new Y;return f.restart(t,n,e),f}function At(){tt(),++B;for(var t=Q,n;t;)(n=$-t._time)>=0&&t._call.call(void 0,n),t=t._next;--B}function U(){$=(R=P.now())+X,B=C=0;try{At()}finally{B=0,zt(),$=0}}function Mt(){var t=P.now(),n=t-R;n>Z&&(X-=n,R=t)}function zt(){for(var t,n=Q,e,f=1/0;n;)n._call?(f>n._time&&(f=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Q=e);L=t,H(f)}function H(t){if(!B){C&&(C=clearTimeout(C));var n=t-$;n>24?(t<1/0&&(C=setTimeout(U,t-P.now()-X)),k&&(k=clearInterval(k))):(k||(R=P.now(),k=setInterval(Mt,Z)),B=1,q(U))}}const It=1664525,bt=1013904223,V=4294967296;function jt(){let t=1;return()=>(t=(It*t+bt)%V)/V}function Tt(t){return t.x}function Dt(t){return t.y}var Et=10,Ft=Math.PI*(3-Math.sqrt(5));function Ct(t){var n,e=1,f=.001,a=1-Math.pow(f,1/300),o=0,s=.6,r=new Map,c=nt(w),i=et("tick","end"),v=jt();t==null&&(t=[]);function w(){y(),i.call("tick",n),e<f&&(c.stop(),i.call("end",n))}function y(l){var u,g=t.length,x;l===void 0&&(l=1);for(var m=0;m<l;++m)for(e+=(o-e)*a,r.forEach(function(p){p(e)}),u=0;u<g;++u)x=t[u],x.fx==null?x.x+=x.vx*=s:(x.x=x.fx,x.vx=0),x.fy==null?x.y+=x.vy*=s:(x.y=x.fy,x.vy=0);return n}function h(){for(var l=0,u=t.length,g;l<u;++l){if(g=t[l],g.index=l,g.fx!=null&&(g.x=g.fx),g.fy!=null&&(g.y=g.fy),isNaN(g.x)||isNaN(g.y)){var x=Et*Math.sqrt(.5+l),m=l*Ft;g.x=x*Math.cos(m),g.y=x*Math.sin(m)}(isNaN(g.vx)||isNaN(g.vy))&&(g.vx=g.vy=0)}}function _(l){return l.initialize&&l.initialize(t,v),l}return h(),n={tick:y,restart:function(){return c.restart(w),n},stop:function(){return c.stop(),n},nodes:function(l){return arguments.length?(t=l,h(),r.forEach(_),n):t},alpha:function(l){return arguments.length?(e=+l,n):e},alphaMin:function(l){return arguments.length?(f=+l,n):f},alphaDecay:function(l){return arguments.length?(a=+l,n):+a},alphaTarget:function(l){return arguments.length?(o=+l,n):o},velocityDecay:function(l){return arguments.length?(s=1-l,n):1-s},randomSource:function(l){return arguments.length?(v=l,r.forEach(_),n):v},force:function(l,u){return arguments.length>1?(u==null?r.delete(l):r.set(l,_(u)),n):r.get(l)},find:function(l,u,g){var x=0,m=t.length,p,N,z,j,A;for(g==null?g=1/0:g*=g,x=0;x<m;++x)j=t[x],p=l-j.x,N=u-j.y,z=p*p+N*N,z<g&&(A=j,g=z);return A},on:function(l,u){return arguments.length>1?(i.on(l,u),n):i.on(l)}}}function Lt(){var t,n,e,f,a=d(-30),o,s=1,r=1/0,c=.81;function i(h){var _,l=t.length,u=G(t,Tt,Dt).visitAfter(w);for(f=h,_=0;_<l;++_)n=t[_],u.visit(y)}function v(){if(t){var h,_=t.length,l;for(o=new Array(_),h=0;h<_;++h)l=t[h],o[l.index]=+a(l,h,t)}}function w(h){var _=0,l,u,g=0,x,m,p;if(h.length){for(x=m=p=0;p<4;++p)(l=h[p])&&(u=Math.abs(l.value))&&(_+=l.value,g+=u,x+=u*l.x,m+=u*l.y);h.x=x/g,h.y=m/g}else{l=h,l.x=l.data.x,l.y=l.data.y;do _+=o[l.data.index];while(l=l.next)}h.value=_}function y(h,_,l,u){if(!h.value)return!0;var g=h.x-n.x,x=h.y-n.y,m=u-_,p=g*g+x*x;if(m*m/c<p)return p<r&&(g===0&&(g=S(e),p+=g*g),x===0&&(x=S(e),p+=x*x),p<s&&(p=Math.sqrt(s*p)),n.vx+=g*h.value*f/p,n.vy+=x*h.value*f/p),!0;if(h.length||p>=r)return;(h.data!==n||h.next)&&(g===0&&(g=S(e),p+=g*g),x===0&&(x=S(e),p+=x*x),p<s&&(p=Math.sqrt(s*p)));do h.data!==n&&(m=o[h.data.index]*f/p,n.vx+=g*m,n.vy+=x*m);while(h=h.next)}return i.initialize=function(h,_){t=h,e=_,v()},i.strength=function(h){return arguments.length?(a=typeof h=="function"?h:d(+h),v(),i):a},i.distanceMin=function(h){return arguments.length?(s=h*h,i):Math.sqrt(s)},i.distanceMax=function(h){return arguments.length?(r=h*h,i):Math.sqrt(r)},i.theta=function(h){return arguments.length?(c=h*h,i):Math.sqrt(c)},i}function Pt(t,n,e){var f,a=d(.1),o,s;typeof t!="function"&&(t=d(+t)),n==null&&(n=0),e==null&&(e=0);function r(i){for(var v=0,w=f.length;v<w;++v){var y=f[v],h=y.x-n||1e-6,_=y.y-e||1e-6,l=Math.sqrt(h*h+_*_),u=(s[v]-l)*o[v]*i/l;y.vx+=h*u,y.vy+=_*u}}function c(){if(f){var i,v=f.length;for(o=new Array(v),s=new Array(v),i=0;i<v;++i)s[i]=+t(f[i],i,f),o[i]=isNaN(s[i])?0:+a(f[i],i,f)}}return r.initialize=function(i){f=i,c()},r.strength=function(i){return arguments.length?(a=typeof i=="function"?i:d(+i),c(),r):a},r.radius=function(i){return arguments.length?(t=typeof i=="function"?i:d(+i),c(),r):t},r.x=function(i){return arguments.length?(n=+i,r):n},r.y=function(i){return arguments.length?(e=+i,r):e},r}function Qt(t){var n=d(.1),e,f,a;typeof t!="function"&&(t=d(t==null?0:+t));function o(r){for(var c=0,i=e.length,v;c<i;++c)v=e[c],v.vx+=(a[c]-v.x)*f[c]*r}function s(){if(e){var r,c=e.length;for(f=new Array(c),a=new Array(c),r=0;r<c;++r)f[r]=isNaN(a[r]=+t(e[r],r,e))?0:+n(e[r],r,e)}}return o.initialize=function(r){e=r,s()},o.strength=function(r){return arguments.length?(n=typeof r=="function"?r:d(+r),s(),o):n},o.x=function(r){return arguments.length?(t=typeof r=="function"?r:d(+r),s(),o):t},o}function Rt(t){var n=d(.1),e,f,a;typeof t!="function"&&(t=d(t==null?0:+t));function o(r){for(var c=0,i=e.length,v;c<i;++c)v=e[c],v.vy+=(a[c]-v.y)*f[c]*r}function s(){if(e){var r,c=e.length;for(f=new Array(c),a=new Array(c),r=0;r<c;++r)f[r]=isNaN(a[r]=+t(e[r],r,e))?0:+n(e[r],r,e)}}return o.initialize=function(r){e=r,s()},o.strength=function(r){return arguments.length?(n=typeof r=="function"?r:d(+r),s(),o):n},o.y=function(r){return arguments.length?(t=typeof r=="function"?r:d(+r),s(),o):t},o}export{$t as forceCenter,Bt as forceCollide,kt as forceLink,Lt as forceManyBody,Pt as forceRadial,Ct as forceSimulation,Qt as forceX,Rt as forceY};
